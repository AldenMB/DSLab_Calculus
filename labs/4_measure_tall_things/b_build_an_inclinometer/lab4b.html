
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Laboratory 4b &#8212; The Data Science Labs on Differential and Integral Calculus</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Laboratory 4c" href="../c_make_the_measurements/lab4c.html" />
    <link rel="prev" title="Laboratory 4a" href="../a_prepare_for_building_inclinometer/lab4a.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">The Data Science Labs on Differential and Integral Calculus</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Intro to Notebooks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../1_intro_to_notebooks/lab0.html">
   Laboratory 0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../1_intro_to_notebooks/lab1.html">
   Laboratory 1
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Determine your heart rate
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../2_determine_heart_rate/lab2.html">
   Laboratory 2
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Estimate your blood flow
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../3_estimate_blood_flow/lab3.html">
   Laboratory 3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Accurately measure the heights of tall and far away things
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../a_prepare_for_building_inclinometer/lab4a.html">
   Laboratory 4a
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Laboratory 4b
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c_make_the_measurements/lab4c.html">
   Laboratory 4c
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../d_error_analysis/lab4d.html">
   Laboratory 4d
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../e_symbolic_error/lab4e.html">
   Laboratory 4e
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Measure the speeds of nearby things
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../5_measure_speeds/a_derivatives/lab5a.html">
   Laboratory 5a
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../5_measure_speeds/b_build_a_tool/lab5b.html">
   Laboratory 5b
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Design a project of your own
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../final_project/labfinal.html">
   Final Project
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/TheDataScienceLabs/DSLab_Calculus/main?urlpath=tree/book/labs/4_measure_tall_things/b_build_an_inclinometer/lab4b.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/TheDataScienceLabs/DSLab_Calculus"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/TheDataScienceLabs/DSLab_Calculus/issues/new?title=Issue%20on%20page%20%2Flabs/4_measure_tall_things/b_build_an_inclinometer/lab4b.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/labs/4_measure_tall_things/b_build_an_inclinometer/lab4b.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-00-content-span">
   <span style="color:orange;">
    00. Content
   </span>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-0-required-hardware-span">
   <span style="color:orange;">
    0. Required Hardware
   </span>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-1-objective-span">
   <span style="color:orange;">
    1. Objective
   </span>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-2-the-button-span">
   <span style="color:orange;">
    2. The Button
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-1-span-10-pts">
     <span style="color:red">
      Exercise 1
     </span>
     (10 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-3-the-screen-span">
   <span style="color:orange;">
    3. The Screen
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#i2c">
     I2C
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-framebuffer">
     The framebuffer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#three-clocks">
     Three clocks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-2-span-20-pts">
     <span style="color:red">
      Exercise 2
     </span>
     (20 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#display-a-clock">
   Display a clock
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-3-span-5-pts">
     <span style="color:red">
      Exercise 3
     </span>
     (5 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-4-the-accelerometer-span">
   <span style="color:orange;">
    4. The Accelerometer
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#raw-readings">
     Raw readings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-4-span-10-pts">
     <span style="color:red">
      Exercise 4
     </span>
     (10 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reducing-error-through-averaging">
     Reducing error through averaging
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-warm-up-to-exercise-5-span-0-pts">
     <span style="color:red">
      Warm Up to Exercise 5
     </span>
     (0 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-5-span-15-pts">
     <span style="color:red">
      Exercise 5
     </span>
     (15 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-6-span-10-pts">
     <span style="color:red">
      Exercise 6
     </span>
     (10 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-5-make-an-inclinometer-span">
   <span style="color:orange;">
    5. Make an Inclinometer
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-7-span-30-pts">
     <span style="color:red">
      Exercise 7
     </span>
     (30 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#run-it-on-batteries">
     Run it on batteries
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#main-py">
     <code class="docutils literal notranslate">
      <span class="pre">
       main.py
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-7805-voltage-regulator">
     The 7805 voltage regulator
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Laboratory 4b</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-00-content-span">
   <span style="color:orange;">
    00. Content
   </span>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-0-required-hardware-span">
   <span style="color:orange;">
    0. Required Hardware
   </span>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-1-objective-span">
   <span style="color:orange;">
    1. Objective
   </span>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-2-the-button-span">
   <span style="color:orange;">
    2. The Button
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-1-span-10-pts">
     <span style="color:red">
      Exercise 1
     </span>
     (10 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-3-the-screen-span">
   <span style="color:orange;">
    3. The Screen
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#i2c">
     I2C
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-framebuffer">
     The framebuffer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#three-clocks">
     Three clocks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-2-span-20-pts">
     <span style="color:red">
      Exercise 2
     </span>
     (20 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#display-a-clock">
   Display a clock
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-3-span-5-pts">
     <span style="color:red">
      Exercise 3
     </span>
     (5 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-4-the-accelerometer-span">
   <span style="color:orange;">
    4. The Accelerometer
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#raw-readings">
     Raw readings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-4-span-10-pts">
     <span style="color:red">
      Exercise 4
     </span>
     (10 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reducing-error-through-averaging">
     Reducing error through averaging
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-warm-up-to-exercise-5-span-0-pts">
     <span style="color:red">
      Warm Up to Exercise 5
     </span>
     (0 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-5-span-15-pts">
     <span style="color:red">
      Exercise 5
     </span>
     (15 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-6-span-10-pts">
     <span style="color:red">
      Exercise 6
     </span>
     (10 pts)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#span-style-color-orange-5-make-an-inclinometer-span">
   <span style="color:orange;">
    5. Make an Inclinometer
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#span-style-color-red-exercise-7-span-30-pts">
     <span style="color:red">
      Exercise 7
     </span>
     (30 pts)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#run-it-on-batteries">
     Run it on batteries
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#main-py">
     <code class="docutils literal notranslate">
      <span class="pre">
       main.py
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-7805-voltage-regulator">
     The 7805 voltage regulator
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="laboratory-4b">
<h1>Laboratory 4b<a class="headerlink" href="#laboratory-4b" title="Permalink to this headline">#</a></h1>
<p><font size="6"> Build an Inclinometer </font> <br>
<font size="6"> Objects on Hardware </font> <br>
<font size="3"> Last updated June 16, 2022 </font></p>
<section id="span-style-color-orange-00-content-span">
<h2><span style="color:orange;"> 00. Content </span><a class="headerlink" href="#span-style-color-orange-00-content-span" title="Permalink to this headline">#</a></h2>
<p><font size="5"> Mathematics </font></p>
<ul class="simple">
<li><p>Averaging</p></li>
</ul>
<p><font size="5"> Programming Skills </font></p>
<ul class="simple">
<li><p>Button pressing</p></li>
<li><p>Use a screen to display values</p></li>
<li><p>Display a clock</p></li>
<li><p>Use an accelerometer</p></li>
<li><p>Program averaging</p></li>
<li><p>Program components to work together</p></li>
<li><p>Make an inclinometer</p></li>
<li><p>Running a Pi on battery power</p></li>
<li><p>Use a voltage regulator</p></li>
</ul>
<p><font size="5"> Embedded Systems </font></p>
<ul class="simple">
<li><p>Thonny and Micropython</p></li>
</ul>
</section>
<section id="span-style-color-orange-0-required-hardware-span">
<h2><span style="color:orange;"> 0. Required Hardware </span><a class="headerlink" href="#span-style-color-orange-0-required-hardware-span" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Microcontroller: Raspberry Pi Pico</p></li>
<li><p>Button</p></li>
<li><p>OLED (clock)</p></li>
<li><p>LSM9DS0 (accelerometer)</p></li>
<li><p>7805 voltage regulator</p></li>
<li><p>9-volt battery</p></li>
<li><p>Wires</p></li>
<li><p>Breadboard</p></li>
<li><p>USB connector</p></li>
</ul>
<h3 style="background-color:lightblue"> Copy the file `student_info.py` into the folder you are working in, then run this cell to put your name and email into this document </h3><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">student_info</span> <span class="kn">import</span> <span class="n">show_info</span>
<span class="n">show_info</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="span-style-color-orange-1-objective-span">
<h2><span style="color:orange;"> 1. Objective </span><a class="headerlink" href="#span-style-color-orange-1-objective-span" title="Permalink to this headline">#</a></h2>
<p>An inclinometer is a device for measuring the angle between a sight line and the horizon. For lab 4c, you will need an inclinometer which you can use outdoors, not connected to a computer. Here are some requirements:</p>
<ul class="simple">
<li><p>it should run on battery power alone</p></li>
<li><p>it should have a display which you can read, telling you the components of acceleration</p></li>
<li><p>it should have a “hold” button, which freezes the display while pressed so that a reading can be made</p></li>
</ul>
<p>The cheapest inclinometer on Amazon which meets these requirements costs about 30 dollars. Can we do better? If we spend 4 dollars on a Raspberry Pi Pico, 4 dollars on an OLED display, 3 dollars on an accelerometer chip and 3 dollars on a 9 volt battery with a holder, that leaves us 16 dollars to buy wires and a case. Not bad! Plus, ours will be more customizable – we could easily add features down the road, if we want them.</p>
</section>
<section id="span-style-color-orange-2-the-button-span">
<h2><span style="color:orange;"> 2. The Button </span><a class="headerlink" href="#span-style-color-orange-2-the-button-span" title="Permalink to this headline">#</a></h2>
<p>You have been provided a button. It is a very common type, more precisely called a <em>tactile switch</em>. It has four legs, but opposite pairs of them are connected internally, so there are only two electrical connections to be made. Have a look at the <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/TL1105.pdf">data sheet</a> for the TL1105 tactile switch, which shows a schematic of how the legs are connected.</p>
<p>Connect one side of the button to a ground pin of the Pico and connect the other side to any GP (general purpose) pin. Then open up <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/button.py">button.py</a> in Thonny and configure it according to what pin you chose, and run it. The built-in LED should turn on while the button is pressed.</p>
<section id="span-style-color-red-exercise-1-span-10-pts">
<h3><span style="color:red"> Exercise 1 </span> (10 pts)<a class="headerlink" href="#span-style-color-red-exercise-1-span-10-pts" title="Permalink to this headline">#</a></h3>
<p>Modify <code class="docutils literal notranslate"><span class="pre">button.py</span></code> so that instead of coming on while the button is pressed, pressing the button toggles the LED on and off. There are many ways to do this; try and be creative, and if you get stuck, ask for help from an instructor or a classmate. Here are a couple ideas which might get you moving:</p>
<ul class="simple">
<li><p>you can use variables to keep track of the current condition (whether you are in “hold” mode, whether the button is pressed, etc) and compare against them to see if anything has changed.</p></li>
<li><p>you can use <a class="reference external" href="https://docs.micropython.org/en/latest/library/time.html">any of the time functions</a> to keep things from going too fast.</p></li>
<li><p>if you lose track of what is happening, it can help to use <code class="docutils literal notranslate"><span class="pre">print</span></code> statements.</p></li>
</ul>
<p>Copy the contents of the file into the cell below so that it can be graded.</p>
<h3 style="background-color:lightblue"> Write Answers for Exercise 1 Below </h3><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># if you copy your code here, between the triple backticks, it will be formatted nicely as code.</span>
</pre></div>
</div>
</section>
</section>
<section id="span-style-color-orange-3-the-screen-span">
<h2><span style="color:orange;"> 3. The Screen </span><a class="headerlink" href="#span-style-color-orange-3-the-screen-span" title="Permalink to this headline">#</a></h2>
<section id="i2c">
<h3>I2C<a class="headerlink" href="#i2c" title="Permalink to this headline">#</a></h3>
<p>Usually a modern electronic device will consist of a <em>microcontroller</em> (such as the Raspberry Pi Pico) and several <em>peripherals</em>. Peripherals are what we call any component the microcontroller is “in charge” of. The two main peripherals we will be using in our inclinometer are a screen and an accelerometer. You might call the button a peripheral, but usually the word peripheral refers to components which do something on their own, while communicating with the microcontroller.</p>
<p>One of the most popular ways for a microcontroller to communicate with a peripheral is using a protocol called the Inter-Integrated-Circuit protocol. Its name is usually abbreviated, either as IIC, I²C, or simply I2C. These are pronounced as “eye-eye-see”, “eye-squared-see” or “eye-two-see” respectively. I2C uses two wires, one called Serial Clock (abbreviated as SCL) and the other called Serial Data (abbreviated SDA). One of the brilliant things about I2C is that every I2C peripheral has its own identification number, so when a message is sent using the I2C protocol it can have a label saying “who it is for”. That means you can have several different peripherals all connected to the same two wires – potentially connecting dozens of peripherals to a microcontroller using only two wires (assuming none of the devices share an identification number). Since many devices are sharing the same connection an I2C connection is called a “bus”, from the Latin <em>Omnibus</em> which means “for everyone”. I2C is an example of a <em>serial</em> communication protocol, because bits of data are sent one after another (in a series) over relatively few wires, instead of all-at-once over relatively many wires. You have already heard of, and used, another serial bus protocol – the so-called Universal Serial Bus, usually abbreviated as USB.</p>
<p>The Raspberry Pi Pico has two I2C busses, numbered 0 and 1. You can see which pins they are connected to on the Pico’s datasheet; for example, to use I2C bus number 0, you can use any of the GP pins labeled as I2C0 SCL and I2C0 SDA. You might choose GP pins 20 and 21, or 12 and 13, or 4 and 5 for a few examples. When you set up an I2C bus, you will have to choose a frequency for it to use. This is a fairly straightforward decision. The valid choices of frequency are 100,000; 400,000; 1,000,000; 1,700,000; and 3,400,000 Hertz. If you use a higher frequency then your system will run faster and consume more power. Higher frequencies might not work, depending on several factors such as how long your wires are and how much electromagnetic interference they experience. Also, some peripherals are not compatible with higher frequencies. In a situation like ours, where we are not particularly concerned with power consumption, it makes sense to choose the highest frequency possible so that your system runs faster.</p>
</section>
<section id="the-framebuffer">
<h3>The framebuffer<a class="headerlink" href="#the-framebuffer" title="Permalink to this headline">#</a></h3>
<p>On the hardware side, we interact with the OLED display using I2C. In software, the interface we will use is one of the interfaces built into Micropython: the frame buffer interface.</p>
<p>It’s called a frame buffer because when interacting with it, you make most of your changes in an array called a buffer, stored on the Pico. We only send data to the display when we call the function <code class="docutils literal notranslate"><span class="pre">show()</span></code>, as a complete frame ready to display. This way, we are using the I2C bus as little as possible, freeing up time for other peripherals to use the I2C bus.</p>
<p>The documentation for the frame buffer interface is <a class="reference external" href="https://docs.micropython.org/en/latest/library/framebuf.html">part of the Micropython documentation</a>. There you will find functions for drawing lines, rectangles, and text, as well as a function for writing to individual pixels.</p>
</section>
<section id="three-clocks">
<h3>Three clocks<a class="headerlink" href="#three-clocks" title="Permalink to this headline">#</a></h3>
<p>Usually the easiest way to learn a new tool is to see it used. As an example, we have provided three programs which do the same thing using the OLED display. <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/procedural_clock.py">procedural_clock.py</a> draws a clock on the display by performing a sequence of actions one after another, inside a <code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">True</span></code> loop. <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/classy_clock.py">classy_clock.py</a> does the exact same steps, but wraps everything to do with the display into one class and defines methods on the class to do the various parts. <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/grandfather_clock.py">grandfather_clock.py</a> is almost identical to <code class="docutils literal notranslate"><span class="pre">classy_clock.py</span></code>, but it uses inheritance, hence the name. Note that in practice you would usually define any classes you are using in a separate module, and import those classes into your main file. We have chosen to put the class definition at the bottom of the file to make it easier for you to compare them.</p>
<p>In terms of what they do, the three programs are identical. Their difference lies in how easy they are to read and how easy they are to modify.</p>
</section>
<section id="span-style-color-red-exercise-2-span-20-pts">
<h3><span style="color:red"> Exercise 2 </span> (20 pts)<a class="headerlink" href="#span-style-color-red-exercise-2-span-20-pts" title="Permalink to this headline">#</a></h3>
<p>Read the three programs carefully. In three to four paragraphs, reflect on the way the code is organized in each. What are their relative merits? What might make one or another of these programs easier to read, modify or extend? Which ones would be easiest to split apart into multiple smaller modules? Which ones are more aesthetically pleasing? Give your honest assessment, since many of these questions are matters of opinion. Be sure to refer to specific lines from the programs in your answer.</p>
<h3 style="background-color:lightblue"> Write Answers for Exercise 2 Below </h3></section>
</section>
<section id="display-a-clock">
<h2>Display a clock<a class="headerlink" href="#display-a-clock" title="Permalink to this headline">#</a></h2>
<p>The wiring is very simple for this one. There are only four wires to use: power, ground, and the two I2C wires. <strong>Unplug your microcontroller from the computer</strong> and wire up the display. If you are uncertain about your wiring, then ask for an instructor to check it over. If you are confident in your wiring you can continue.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>OLED</p></th>
<th class="head"><p>Pico</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GND</p></td>
<td><p>GND</p></td>
</tr>
<tr class="row-odd"><td><p>VCC</p></td>
<td><p>3V3(OUT)</p></td>
</tr>
<tr class="row-even"><td><p>SCL</p></td>
<td><p>I2C0 SCL  or I2C1 SCL</p></td>
</tr>
<tr class="row-odd"><td><p>SDA</p></td>
<td><p>I2C0 SDA  or I2C1 SDA</p></td>
</tr>
</tbody>
</table>
<section id="span-style-color-red-exercise-3-span-5-pts">
<h3><span style="color:red"> Exercise 3 </span> (5 pts)<a class="headerlink" href="#span-style-color-red-exercise-3-span-5-pts" title="Permalink to this headline">#</a></h3>
<p>Copy the file <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/ssd1306.py">ssd1306.py</a> onto your Pico using Thonny, which provides a class for interacting with the specific OLED displays we are using. Then, pick your favorite of the clock programs and run it. You will have to modify the line which sets up the I2C bus according to whichever specific SCL and SDA pins you are using – remember to use the number labeled with GP on the datasheet, and set the <code class="docutils literal notranslate"><span class="pre">id</span></code> according to whether you are using I2C bus 0 or 1. Once you have it running, just write a note below indicating that you have done so.</p>
<h3 style="background-color:lightblue"> Write Answers for Exercise 3 Below </h3></section>
</section>
<section id="span-style-color-orange-4-the-accelerometer-span">
<h2><span style="color:orange;"> 4. The Accelerometer </span><a class="headerlink" href="#span-style-color-orange-4-the-accelerometer-span" title="Permalink to this headline">#</a></h2>
<p>In recent years so-called Micro Electro Mechanical Systems (MEMS) have become very cheap and reliable. These are made using processes which are similar to the ones used to make computer chips. One common type is an accelerometer, which does pretty much what it says: measures acceleration.</p>
<p>Why does this help us to make an inclinometer? An inclinometer is usually held very still to make a measurement; it’s not accelerating. Naively, we might think an accelerometer would tell us nothing about a stationary object, except that it is stationary. As it turns out, that naive view is incorrect because of general relativity. As it turns out, the effect of gravity also shows up in our measurements as an acceleration. If you wish to learn more about this, you can see <a class="reference external" href="https://www.youtube.com/watch?v=mAtRD9_4Oa0">this short video</a> which has helpful animations, or <a class="reference external" href="https://www.youtube.com/watch?v=vng2-R64rAY">this more impassioned video</a> from a professional physicist who presents the limits of this interpretation of gravity. For our purpose, it is enough to know that if the accelerometer is being held still, it will indicate the direction of gravity. By angling our accelerometer toward a target, we can find the angle between the target and vertical.</p>
<section id="raw-readings">
<h3>Raw readings<a class="headerlink" href="#raw-readings" title="Permalink to this headline">#</a></h3>
<p>We will use an accelerometer called the LSM9DS0. It also uses I2C, so we can use the same bus to communicate with it. Go ahead and connect it.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>LSM9DS0</p></th>
<th class="head"><p>OLED</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GND</p></td>
<td><p>GND</p></td>
</tr>
<tr class="row-odd"><td><p>VIN</p></td>
<td><p>VCC</p></td>
</tr>
<tr class="row-even"><td><p>SCL</p></td>
<td><p>SCL</p></td>
</tr>
<tr class="row-odd"><td><p>SDA</p></td>
<td><p>SDA</p></td>
</tr>
</tbody>
</table>
<p>Load the module <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/lsm9ds0.py">lsm9ds0.py</a> onto the Pico, and then run the file <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/accelerometer.py">accelerometer.py</a> in Thonny. You will have to modify it so that the line where the I2C bus is configured uses the right pins. You should see it printing values in Thonny.</p>
</section>
<section id="span-style-color-red-exercise-4-span-10-pts">
<h3><span style="color:red"> Exercise 4 </span> (10 pts)<a class="headerlink" href="#span-style-color-red-exercise-4-span-10-pts" title="Permalink to this headline">#</a></h3>
<p>Describe the values in words, including a description of what happens when you move the accelerometer around while the program is running. About how many of the digits appear stable, that is, not fluctuating unpredictably?</p>
<h3 style="background-color:lightblue"> Write Answers for Exercise 4 Below </h3></section>
<section id="reducing-error-through-averaging">
<h3>Reducing error through averaging<a class="headerlink" href="#reducing-error-through-averaging" title="Permalink to this headline">#</a></h3>
<p>One way we are familiar with reducing error is by taking multiple measurements and averaging them. We could do that ourselves, but why not have the microcontroller do it for us? Since we will be reading off values by eye, this could dramatically reduce the amount of numbers we have to write down. In order to make this easy, let’s build a class to do it for us. Since we are using Micropython, we can run and test our module here and have confidence that it will work the same way on our microcontroller.</p>
</section>
<section id="span-style-color-red-warm-up-to-exercise-5-span-0-pts">
<h3><span style="color:red"> Warm Up to Exercise 5 </span> (0 pts)<a class="headerlink" href="#span-style-color-red-warm-up-to-exercise-5-span-0-pts" title="Permalink to this headline">#</a></h3>
<p><strong>Part 1:</strong> In one line of code, change the first element of the list <code class="docutils literal notranslate"><span class="pre">mylist</span></code> to the value <span class="math notranslate nohighlight">\(11.0\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">22.0</span><span class="p">,</span> <span class="mf">33.0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>                       <span class="c1"># prints [1.0, 22.0, 33.0]</span>
<span class="c1"># change the first entry of mylist</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>                       <span class="c1"># should print [11.0, 22.0, 33.0]</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Part 2:</strong> Write a function called <code class="docutils literal notranslate"><span class="pre">add_element()</span></code> with three inputs: <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span></code>, and <code class="docutils literal notranslate"><span class="pre">i</span></code>. The function changes the element at index <code class="docutils literal notranslate"><span class="pre">i</span></code> of the given list to <code class="docutils literal notranslate"><span class="pre">value</span></code> and returns the modified list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># write your function here</span>

<span class="nb">print</span><span class="p">(</span><span class="n">add_element</span><span class="p">(</span><span class="n">mylist</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># changes mylist to [1.0, 2.0, 33.0]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="span-style-color-red-exercise-5-span-15-pts">
<h3><span style="color:red"> Exercise 5 </span> (15 pts)<a class="headerlink" href="#span-style-color-red-exercise-5-span-15-pts" title="Permalink to this headline">#</a></h3>
<p>Most of this class is written already – it’s just missing two methods. You can find it in <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/averager.py">averager.py</a>. Your task is to fill in the two missing methods, so that the class will pass all its tests.</p>
<p>We have provided tests in the form of examples written in the class’s docstring. Don’t worry, you don’t have to check them yourself. There is a convenient tool built into Python which will check the examples in the documentation for us. Run the following two cells to check your progress. Then, run the cell below it which will display the contents of your completed module for grading.</p>
<h3 style="background-color:lightblue"> Write Answers for Exercise 5 Below </h3><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">averager</span>
<span class="kn">import</span> <span class="nn">doctest</span>

<span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">averager</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">inspect</span>
<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">averager</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="span-style-color-red-exercise-6-span-10-pts">
<h3><span style="color:red"> Exercise 6 </span> (10 pts)<a class="headerlink" href="#span-style-color-red-exercise-6-span-10-pts" title="Permalink to this headline">#</a></h3>
<p>Copy <code class="docutils literal notranslate"><span class="pre">averager.py</span></code> onto the Pico, and change <code class="docutils literal notranslate"><span class="pre">accelerometer.py</span></code> so that the components of acceleration are averaged out using the <code class="docutils literal notranslate"><span class="pre">Averager</span></code> class. Play with the size of the averager, in particular paying attention to how long it takes the values to adjust to a change in position. Then answer these questions:</p>
<ol class="simple">
<li><p>What are the benefits of keeping fewer previous values? What are the benefits of keeping more?</p></li>
<li><p>How many is too many? At what point does it become no longer practical to store more values?</p></li>
<li><p>Is there a point of diminishing returns, where you could keep more values stored but it wouldn’t help much?</p></li>
</ol>
<h3 style="background-color:lightblue"> Write Answers for Exercise 6 Below </h3></section>
</section>
<section id="span-style-color-orange-5-make-an-inclinometer-span">
<h2><span style="color:orange;"> 5. Make an Inclinometer </span><a class="headerlink" href="#span-style-color-orange-5-make-an-inclinometer-span" title="Permalink to this headline">#</a></h2>
<section id="span-style-color-red-exercise-7-span-30-pts">
<h3><span style="color:red"> Exercise 7 </span> (30 pts)<a class="headerlink" href="#span-style-color-red-exercise-7-span-30-pts" title="Permalink to this headline">#</a></h3>
<p>Now you are ready to combine all the components into a useful tool. You must make an inclinometer, with the following features:</p>
<ul class="simple">
<li><p>display the x, y, and z components of acceleration</p>
<ul>
<li><p>averaged across a reasonable number of measurements</p></li>
<li><p>reported with a reasonable number of digits</p></li>
<li><p>with a label indicating which is which</p></li>
</ul>
</li>
<li><p>have a “hold” button which keeps the display from changing while it is pressed</p></li>
</ul>
<p>There are several additional features you can include if you like:</p>
<ul class="simple">
<li><p>turn on the onboard LED when the z-component is very close to zero, so that you can tell at a distance if it is being held vertically</p></li>
<li><p>instead, turn on the onboard LED when the values stored in the averager are very close together (to indicate when you are holding the accelerometer still). This may require modifying <code class="docutils literal notranslate"><span class="pre">averager.py</span></code>, adding another method to check how much the values vary.</p></li>
<li><p>don’t update the display every time you read a new value, instead pick a reasonable number of measurements to take in between screen updates. This will let you increase the number of samples in your averager without increasing the time it takes to get a reading.</p></li>
<li><p>display the measured angle of elevation, in radians and/or degrees</p></li>
<li><p>put some decorative art on the screen</p></li>
<li><p>make the hold button a toggle, and show an indicator on the screen if the inclinometer is in hold mode.</p></li>
<li><p>any other features you may think of</p></li>
</ul>
<p>In addition you must include a description of your inclinometer, explaining how you chose to organize your code and why – what parts did you put into modules? What parts made sense to include as object methods, what parts as functions? How did you choose how many samples to average, and how many digits to show? Your description should also explain what the features of your inclinometer are, and how to use it.</p>
<p>You will be graded on the following rubric:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>10 pts</p></th>
<th class="head"><p>5 pts</p></th>
<th class="head"><p>0 pts</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Functionality</p></td>
<td><p>Has all the required features, as well as at least one additional feature</p></td>
<td><p>Missing one required feature, or one of the features does not work as it should</p></td>
<td><p>Missing more than one required feature</p></td>
</tr>
<tr class="row-odd"><td><p>Style</p></td>
<td><p>Uses classes, functions, and modules where appropriate. Uses consistent spacing and style, with comments and docstrings where appropriate.</p></td>
<td><p>Some unconventional choices were made which make the code hard to read, but there were clearly deliberate design choices made to make the code easier to understand.</p></td>
<td><p>There are several places where functions, classes, or modules would have improved the readability but they were not used.</p></td>
</tr>
<tr class="row-even"><td><p>Documentation</p></td>
<td><p>The description supports the choices made in the code. Based on the description it is clear how to use the inclinometer, and what features it has. The structure of the program is described in full sentences.</p></td>
<td><p>One or more major choice about the code was not supported, or at least one feature is not documented, or there are multiple grammatical or spelling errors.</p></td>
<td><p>The description does not do a good job of describing the code and does not justify the choices which were made.</p></td>
</tr>
</tbody>
</table>
<p>You should type your description below, and paste the content of each file you write into this document so that it can be graded. If you choose to include a module which was already graded as part of this lab, you don’t need to paste it here.</p>
<h3 style="background-color:lightblue"> Write Answers for Exercise 7 Below </h3></section>
<section id="run-it-on-batteries">
<h3>Run it on batteries<a class="headerlink" href="#run-it-on-batteries" title="Permalink to this headline">#</a></h3>
<p>At the start of class next week, we will go outside to take some measurements using your accelerometer. We will power the Pico from a 9-volt battery. <strong>Here are a few important cautions:</strong></p>
<ul class="simple">
<li><p>9 volts is more than any part of the Pico can handle. If you connect the battery directly you will damage the microcontroller. We need to use another component to convert the voltage to a range the Pico can handle.</p></li>
<li><p>It is not safe to power the Pico from more than one source at a time. That means you must not connect the Pico to a computer while it is powered by a battery, and you must not connect a battery while it is connected to a computer.</p></li>
</ul>
</section>
<section id="main-py">
<h3><code class="docutils literal notranslate"><span class="pre">main.py</span></code><a class="headerlink" href="#main-py" title="Permalink to this headline">#</a></h3>
<p>Before running your inclinometer from a battery, here is a question: how will we start the program without using Thonny? The inclinometer needs to run without being connected to a computer.</p>
<p>Here is the trick we will use: when the Pico powers on, the first thing it does is check its memory for a file called <code class="docutils literal notranslate"><span class="pre">main.py</span></code>. If there is a file with that name, it runs the file. So there is our solution: make a file called <code class="docutils literal notranslate"><span class="pre">main.py</span></code> which starts the inclinometer. Or just rename the file we already have. The important thing is that the file is called <code class="docutils literal notranslate"><span class="pre">main.py</span></code>, and it’s actually stored on the microcontroller.</p>
<p>Before continuing make sure you have your inclinometer starting whenever it gets connected to power. You should be able to plug the the microcontroller into any USB port and watch it start up automatically without doing anything on the computer. Once you have this, you can move on to powering it by battery.</p>
</section>
<section id="the-7805-voltage-regulator">
<h3>The 7805 voltage regulator<a class="headerlink" href="#the-7805-voltage-regulator" title="Permalink to this headline">#</a></h3>
<p>This would not be necessary if we were using a battery with a lower voltage. We are using a 9 volt battery because we already had a bunch of 9 volt batteries. To convert the power coming from the battery to a voltage we can use, we will use one of the most common, cheap voltage regulators available: the 7805. These cost roughly ten cents each when you buy them in large quantities. Using it is very simple:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Battery</p></th>
<th class="head"><p>7805</p></th>
<th class="head"><p>Pico</p></th>
<th class="head"><p>Capacitor</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>red (+)</p></td>
<td><p>input</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>black (-)</p></td>
<td><p>ground</p></td>
<td><p>GND</p></td>
<td><p>either pin</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>output</p></td>
<td><p>VSYS</p></td>
<td><p>either pin</p></td>
</tr>
</tbody>
</table>
<p>The pins on the 7805 are not labeled. You will have to check the <a class="reference external" href="https://github.com/TheDataScienceLabs/DSLab_Calculus/blob/main/book/labs/4_measure_tall_things/b_build_an_inclinometer/L7805CV.pdf">data sheet</a>. <strong>Do not connect the battery until you have had your circuit checked by an instructor.</strong> Once you have had your circuit checked, try turning it on. <strong>Do not take your circuit apart this time</strong>. You will need it next week.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./labs/4_measure_tall_things/b_build_an_inclinometer"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../a_prepare_for_building_inclinometer/lab4a.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Laboratory 4a</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../c_make_the_measurements/lab4c.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Laboratory 4c</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Mireille Boutin, Alden Bradford<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>